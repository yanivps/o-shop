<nav class="navbar navbar-expand-lg navbar-light bg-light" [class.fixed-top]=fixedToTop>
  <a *ngIf="brandLink.routerLink" class="navbar-brand" [routerLink]="brandLink.routerLink">{{brandLink.text}}</a>
  <a *ngIf="brandLink.routerLink == null && brandLink.link" class="navbar-brand" [href]="brandLink.link">{{brandLink.text}}</a>
  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent"
    aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>

  <div class="collapse navbar-collapse" id="navbarSupportedContent">
    <ul class="navbar-nav mr-auto">
      <li *ngFor="let link of links" 
          class="nav-item" 
          routerLinkActive="active">
          <ng-container 
            [ngTemplateOutlet]="isComplexLink(link) ? complexLink : simpleLink"
            [ngTemplateOutletContext]="{link: link}"></ng-container>
      </li>
    </ul>
  </div>
</nav>



<ng-template #simpleLink let-link='link'>
  <a *ngIf="link.routerLink" [routerLink]="link.routerLink" class="nav-link">{{link.text}}</a>
  <a *ngIf="!link.routerLink && link.link" [href]="link.link" class="nav-link">{{link.text}}</a>
</ng-template>

<ng-template #complexLink let-link='link'>
  <div ngbDropdown class="d-inline-block">
    <a class="nav-link dropdown-toggle" unselectable="on" id="dropdownBasic1" ngbDropdownToggle>{{link.text}}</a>
    <div ngbDropdownMenu class="dropdown-menu" aria-labelledby="dropdownBasic1">
      <ng-container *ngFor="let dropdownLink of link.routerLink">
        <button *ngIf="dropdownLink.routerLink" [routerLink]="dropdownLink.routerLink" class="dropdown-item">{{dropdownLink.text}}</button>
        <a *ngIf="!dropdownLink.routerLink && dropdownLink.link" [href]="dropdownLink.link" class="dropdown-item">{{dropdownLink.text}}</a>
      </ng-container>
    </div>
  </div>
</ng-template>